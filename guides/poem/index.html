<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>ARGO Availability and Reliability Monitoring - POEM service for ARGO framework</title>
  <link rel="alternate" type="application/atom+xml" title="API Changes" href="/changes.atom" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="ARGO is a lightweight service for Service Level Monitoring designed for medium and large sized e-Infrastructures. ">
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="ARGO Availability and Reliability Monitoring" />
    <meta property="og:description" content="ARGO is a lightweight service for Service Level Monitoring designed for medium and large sized e-Infrastructures." />
    <meta property="og:url" content="http://argoeu.github.io/" />
    <meta property="og:site_name" content="ARGO Documentation" />
    <meta property="article:publisher" content="ARGO Team" />
    <meta property="og:image" content="http://argoeu.github.io/shared/images/argo-logo.png" />
  <meta name="author" content="">
  <link rel="icon" href="/shared/favicon.ico">
  <!-- Bootstrap core CSS -->
  <link href="/shared/css/bootstrap.min.css" rel="stylesheet">
  
  <link rel="stylesheet" href="/shared/css/font-awesome.min.css">
  <link rel="stylesheet" href="/shared/css/font-beba.css">

  <link href="/shared/css/custom.css" rel="stylesheet">

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>

<body class="documentation">
  <!-- Fixed navbar -->
<nav class="navbar navbar-inverse navbar-fixed-top">
	<div class="container">
		<div class="navbar-header">
		  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
		    <span class="sr-only">Toggle navigation</span>
		    <span class="icon-bar"></span>
		    <span class="icon-bar"></span>
		    <span class="icon-bar"></span>
		  </button>
		  <a class="navbar-brand" href="/index.html"><img src='/shared/images/argo-logo.png' alt='ARGO'  /></a>
		</div>
		<div id="navbar" class="navbar-collapse collapse">
		  <ul class="nav navbar-nav navbar-right">
		    <li class="active"><a href="/index.html">Home</a></li>
		    <li><a href="/index.html#what">About</a></li>
		    <li><a href="/index.html#features">Features</a></li>
		    <li><a href="/use-cases/">Use cases</a></li>
		    <li class="dropdown">
		      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Documentation <span class="caret"></span></a>
		      <ul class="dropdown-menu" role="menu">
			<li><a href="/overview/"><em class="fa fa-file-text-o"></em>  Overview</a></li>
			<li><a href="/guides/installation/"><em class="fa fa-file-text-o"></em>  Installation</a></li>
			<li><a href="/guides/sync/"><em class="fa fa-refresh"></em> EGI Connectors</a></li>
			<li><a href="/guides/poem/"><em class="fa fa-check-square-o"></em>  Poem service</a></li>
			<li><a href="/guides/consumer/"><em class="fa fa-send-o"></em>  Consumer</a></li>
			<li><a href="/guides/argo-compute-engine/"><em class="fa fa-cog"></em>  Compute Engine</a></li>
			<li><a href="/guides/api/"><em class="fa fa-cogs"></em>  API </a></li>
			<li><a href="/guides/webui/"><em class="fa fa-connectdevelop"></em>  Web UI</a></li>
			<li class="divider"></li>
			<li class="dropdown-header">Developers</li>
			<li><a href="/api/v2/"><em class="fa fa-cogs"></em>  API v2 documentation </a></li>
			<li><a href="#"><em class="fa fa-github-alt"></em>  Github</a></li>
		      </ul>
		    </li>
		  </ul>
		</div><!--/.nav-collapse -->
	</div><!--container-->
</nav>

  <div class='container-fluid' >
    <div class='row'>
        <div class="col-md-2 sidebar">
                   <div class="list-group" >	
            <a class="list-group-item disabled blue" href="/overview/">Documentation</a>
          
            <a class="list-group-item" href="/overview/">Overview</a>
          
            <a class="list-group-item disabled blue" href="/guides/installation/">Installation</a>
          
            <a class="list-group-item" href="/guides/installation/"><em class="fa fa-terminal"></em> Standalone</a>
          
          
            <a class="list-group-item" href="/guides/installation_cluster/"><em class="fa fa-sitemap"></em> Cluster Mode</a>
          
            <a class="list-group-item disabled blue" href="/guides/egi-connectors/">Components</a>
          
            <a class="list-group-item" href="/guides/egi-connectors/"><em class="fa fa-refresh"></em> EGI Connectors</a>

          
          	
            <a class="list-group-item active" href="/guides/poem/"><em class="fa fa-check-square-o"></em> Poem service</a>
          
          
            <a class="list-group-item" href="/guides/consumer/"><em class="fa fa-send-o"></em> Consumer</a>
          
            
            <a class="list-group-item " href="/guides/argo-compute-engine/"><em class="fa fa-cog"></em> Compute Engine</a>
          
  	  <div id='caret-data1'>
  	      
              <a class="list-group-item-level2"  href="/guides/argo-compute-engine/installation/">
            
            <em class="fa fa-cog"></em> Installation </a>
            
              <a class="list-group-item-level2"  href="/guides/argo-compute-engine/input/">
            
            <em class="fa fa-cog"></em> Input </a>
 	    
              <a class="list-group-item-level2"  href="/guides/argo-compute-engine/report-configuration/">
            
            <em class="fa fa-cog"></em> Report configurations </a>

 
 	    
              <a class="list-group-item-level2"  href="/guides/argo-compute-engine/cli-interaction/">
            
            <em class="fa fa-cog"></em> CLI </a>


	  </div>
          
            <a class="list-group-item" href="/guides/api/"> 
          
          <em class="fa fa-cogs"></em> API <span class="caret" ></span></a>

          
            <a class="list-group-item" href="/guides/webui/"><em class="fa fa-connectdevelop"></em> Web UI</a>
          
          </div> <!--list group-->
          <p>&nbsp;</p>

          



        </div>
        <div class="col-md-8 main">
          	
            <h1 class="highlight">
            
              <i class='fa fa-check-square-o'></i> 
            
            POEM service for ARGO framework</h1>
          
          <p class="lead"> This document describes the POEM service for ARGO framework.</p>
          
<h2 id="changes">Changes</h2>

<p>POEM for ARGO supports CentOS 6, it is reduced, simplified, easier to deploy and maintain and is much more lightweight than previous versions. Key components that were either dumped or substituted:</p>

<ul>
  <li>MySQL, Oracle: it is replaced with a much more lightweight SQLite</li>
  <li>ATP bridge: since ATP is gone, POEM now syncs data from GOCDB and Operations portal</li>
  <li>poem-sync: removed which led to great simplification of DB model</li>
</ul>

<h2 id="configuration">Configuration</h2>

<h3 id="database">Database</h3>

<p>Prior any work, database needs to be created. Provided script do that for you and <em>need to be executed as root immediately</em> after an installation.</p>

<p><code>poem-createdb</code> - create all necessary database models and POEM superuser account for managing and delegating other cert-authenticated users to handle profiles.</p>

<p><strong>Examples</strong></p>

<pre><code>[root@vcl-0-100 ~]# poem-createdb
Creating tables ...
Creating table auth_permission
Creating table auth_group_permissions
Creating table auth_group
Creating table auth_user_user_permissions
Creating table auth_user_groups
Creating table auth_user
Creating table django_content_type
Creating table django_session
Creating table django_admin_log
Creating table poem_userprofile
Creating table poem_vo
Creating table poem_serviceflavour
Creating table poem_profile
Creating table poem_metricinstance

You just installed Django's auth system, which means you don't have any
superusers defined.
Would you like to create one now? (yes/no): yes
Username (leave blank to use 'apache'): dvrcic
E-mail address: dvrcic@srce.hr
Password:
Password (again):
Superuser created successfully.
Installing custom SQL ...
Installing indexes ...
Installed 0 object(s) from 0 fixture(s)
</code></pre>

<p>POEM superuser account can be automatically created so poem-createdb script doesn’t need to be necessarily interactive, but superuser credentials then must be provided in the config file.</p>

<pre><code>[general]
SUPERUSER_NAME: dvrcic
SUPERUSER_PASSWORD: testbed
SUPERUSER_EMAIL: dvrcic@srce.hr
</code></pre>

<p>There are no config options related to database, it’s just a file with appropriate permissions placed into:</p>

<p><code>/var/lib/poem/poemserv.db</code></p>

<h3 id="profiles-import">Profiles import</h3>

<p><code>poem-importprofiles</code> - can import all profiles like ROC, ROC_CRITICAL, ROC_OPERATORS and GLEXEC from another POEM instance. If POEM instance is not specified at command line, then central one will be used (<code>mon.egi.eu</code>)</p>

<p><strong>Examples</strong></p>

<pre><code>[root@vcl-0-100 ~]# poem-importprofiles
Usage: poem-importprofiles [-i] [-url &lt;URL&gt;] PROFILE1 PROFILE2 ...
       [-i] - Only import profiles if poem database is empty
       [-u &lt;URL&gt;] - URL containing JSON encoded list of profiles
       PROFILE1 PROFILE2 - space separated list of profiles

[root@vcl-0-100 ~]# poem-importprofiles ROC ROC_CRITICAL ROC_OPERATORS GLEXEC
2014-12-02 14:14:56,257 - POEM - INFO - Running synchronizer for POEM sync
2014-12-02 14:14:57,325 - POEM - INFO - Synchronized profile ROC 1.0 ops
2014-12-02 14:14:57,666 - POEM - INFO - Running synchronizer for POEM sync
2014-12-02 14:14:58,285 - POEM - INFO - Synchronized profile ROC_CRITICAL 1.0 ops
2014-12-02 14:14:58,644 - POEM - INFO - Running synchronizer for POEM sync
2014-12-02 14:14:59,551 - POEM - INFO - Synchronized profile ROC_OPERATORS 1.0 ops
2014-12-02 14:14:59,910 - POEM - INFO - Running synchronizer for POEM sync
2014-12-02 14:15:00,674 - POEM - INFO - Synchronized profile GLEXEC 1.0 ops
</code></pre>

<h3 id="autocompletion-of-vo-and-service-flavours-fields-in-web-ui">Autocompletion of VO and Service Flavours fields in Web UI</h3>

<p>Data is synced from Operations Portal and GOCDB, respectively, with the help of two provided scripts:</p>

<p><code>poem-syncvo</code>, <code>poem-syncservtype</code> - scripts need to be executed as root immediately after an installation. Subsequent syncs from both sources are executed every hour as a part of a cron job.</p>

<p><strong>Examples:</strong></p>

<pre><code>[root@vcl-0-100 ~]# poem-syncvo
2014-12-02 14:17:27,629 - POEM - INFO - Added 216 VO
[root@vcl-0-100 ~]# poem-syncservtype
2014-12-02 14:17:50,333 - POEM - INFO - Added 111 service flavours
</code></pre>

<p>There are a new config file options introduced:</p>

<pre><code>GOCDB_SERVICETYPE_URL: https://goc.egi.eu/gocdbpi/private/?method=get_service_types
CIC_VO_URL: http://operations-portal.egi.eu/xml/voIDCard/public/all/true
HOST_CERT = /etc/grid-security/hostcert.pem
HOST_KEY = /etc/grid-security/hostkey.pem
</code></pre>

<p>Certificate is needed for access to GOCDB feed.</p>

<h2 id="rest-api">REST API</h2>

<p>POEM exposes it’s data to NCG and ARGO/ar-sync components via two available APIes:</p>

<p><strong>NCG</strong>: <code>/api/0.2/json/profiles/</code></p>

<p>Returned fields are all available profiles with associated service types and metrics. Some fields like valid_to, valid_from, groups and extensions are kept because of transition period in which poem-sync will still be lurking around. For the same reason, name of fields like atp_vo and atp_service_type_flavour are not changed, although ATP is removed. </p>

<p><strong>Example:</strong></p>

<pre><code>{
    "name": "GLEXEC",
    "atp_vo": "ops",
    "version": "1.0",
    "owner": "/C=HR/O=edu/OU=srce/CN=Daniel Vrcic",
    "description": "test-dn",
    "metric_instances": 
    [
        {
            "metric": "emi.cream.glexec.CREAMCE-JobSubmit",
            "fqan": "/ops/Role=pilot",
            "vo": "ops",
            "atp_service_flavour": "gLExec"
        },
        {
            "metric": "emi.cream.glexec.WN-gLExec",
            "fqan": "/ops/Role=pilot",
            "vo": "ops",
            "atp_service_flavour": "gLExec"
        }
    ]
}
</code></pre>

<p><strong>ARGO</strong>: <code>/api/0.2/json/metrics_in_profiles/?vo_name=VO[&amp;profile_name=PROFILE]</code></p>

<ul>
  <li>mandatory args - vo_name=VO</li>
  <li>optional args - profile_name=PROFILE</li>
</ul>

<p>Returned fields are a list of all available metrics across all profiles for a specified VO. List can be further filtered for a specific profile name.</p>

<p><strong>Examples</strong>:</p>

<pre><code>{
    "name": "ops",
    "profiles": [
        {
            "namespace": "CH.CERN.SAM",
            "name": "ROC_OPERATORS",
            "description": "The main profile that contains Operations tests."
            "metrics": [
                {
                    "service_flavour": "APEL",
                    "fqan": "",
                    "name": "org.apel.APEL-Pub",
                },
                {
                    "service_flavour": "ARC-CE",
                    "fqan": "",
                    "name": "org.nordugrid.ARC-CE-ARIS",
                },
            ],
        },
    ]
}
</code></pre>

<h2 id="things-to-consider-for-future">Things to consider for future</h2>

<ul>
  <li>handle a DB schema update - Django-South</li>
  <li>bootstrap theme</li>
</ul>

        </div><!--col-md-8-->
        <div class="col-md-2">&nbsp;</div>
      </div><!--row-->
    </div><!--container fluid-->
    <!-- from -->
<div class="jumbotron">
    <div class="container" style='padding-left:40px;'>
      <a href='https://www.grnet.gr/en' target='blank'><img src='/shared/images/grnet_transparent.png' style='padding-left:40px;' alt='GRNET S.A - Greek Research & Technology Network' title='GRNET S.A - Greek Research & Technology Network'/></a>
      <a href='http://www.cnrs.fr/' target='blank'><img src='/shared/images/cnrs.png' style='padding-left:40px;' alt='Centre national de la recherche scientifique' title='Centre national de la recherche scientifique'/></a>
      <a href='http://www.srce.unizg.hr/en/' target='blank'><img src='/shared/images/srce.png' style='padding-left:40px;' alt='SCRE - Web stranice Sveučilišnog računskog centra' title='SCRE - Web stranice Sveučilišnog računskog centra'/></a>
      <a href='http://www.egi.eu' target='blank'><img src='/shared/images/egi2.png' style='padding-left:40px;margin-top:-20px;' alt='European Grid Infrastructure' title='European Grid Infrastructure'/></a>
    </div> <!-- /container -->
</div> <!-- jumbotron -->
<!-- from-->


  
<!--footer -->
    <footer  id="footer" class="footer">
	<div class='footer_top'>       
	<div class="row ">
       </div>
       <div class="row ">
	
        <div class=" col-md-offset-1 col-md-3">
		<p><img src='/shared/images/argo-logo.png' alt='Argo'  /></p>		
		<p>ARGO is a lightweight service for Service Level Monitoring designed for medium and large sized e-Infrastructures. </p>
   	</div>
	 <div class="col-md-offset-1 col-md-3">
		<h4>Contact Us</h4>
		<address>
 		<strong>Email</strong><br>
      <a href="mailto:argoeu-project@googlegroups.com" style='color:white;'>argoeu-project[AT]googlegroups.com</a>
		</address>
   	</div>
 	<div class="col-md-3">
		<h4>Open development </h4>
    <p> We follow an open development process. All the repositories of ARGO are hosted on Github under the ARGOeu organization.</p>
   	</div>
    <div class="col-md-1"></div>
      </div>
      </div><!--footer_top-->
      <div class="footer_bottom_holder">
	<div class="footer_bottom">
    <div class="textwidget"><span>Copyright &copy; 2014 - 2015 GRNET S.A. </span>
    </div>
  <div class="textwidget"><span>
      <a href='http://validator.w3.org/check?uri=referer' target='blank'>
        <img src='/shared/images/validated.png' alt='HTML5 - CSS3 - W3C Validated' title='HTML5 - CSS3 - W3C Validated' height="30"/>
       </a>
    </span>
  </div>
	</div>
     </div>	
    </footer>
    <a href="#" class="back-to-top" style="display: inline;">
      <i class="fa fa-arrow-circle-up"></i>
    </a>
<!--/footer -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/shared/js/jquery.min.js"></script>
    <script src="/shared/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="/shared/js/ie10-viewport-bug-workaround.js"></script>
      <script src="/shared/js/jquery.easing.1.3.js"></script>
  <script src="/shared/js/jquery.animate-enhanced.min.js"></script>
  <script src="/shared/js/jquery.superslides.min.js" type="text/javascript" charset="utf-8"></script>
  <script>
    $(function() {
    

      $('#slides').superslides({
        hashchange: false,
        play: 10000
      });

        var offset = 250;
        var duration = 300;
        jQuery(window).scroll(function() {
          if (jQuery(this).scrollTop() > offset) {
            jQuery('.back-to-top').fadeIn(duration);
          } else {
            jQuery('.back-to-top').fadeOut(duration);
          }
        });
        jQuery('.back-to-top').click(function(event) {
          event.preventDefault();
          jQuery('html, body').animate({scrollTop: 0}, duration);
          return false;
        })
      });

  </script>

</body>
</html>
